!function($){function parse(url){var string,params={},query=(string=url).indexOf("?")>=0?string.split("?")[1]:string;return query?($.each(query.split("&"),function(idx,pair){pair=pair.split("="),params[pair[0]]=function(value){value=decodeURIComponent(value);try{return JSON.parse(value)}catch(e){return value}}(pair[1]||"")}),params):params}function serialize(params){var currentKey,currentValue,pairs=[];for(key in params)if(params.hasOwnProperty(key))if(currentKey=key,"object"==typeof(currentValue=params[key]))for(subKey in currentValue)currentValue.hasOwnProperty(subKey)&&pairs.push(currentKey+"["+(isNaN(subKey,10)?subKey:"")+"]="+encodeURIComponent(currentValue[subKey]));else pairs.push(currentKey+"="+encodeURIComponent(currentValue));return pairs.join("&")}$.querystring=function(param){return"string"==typeof param?parse(param):serialize(param)},$.fn.querystring=function(){var existingData,elm=$(this),newData=arguments[0]||{},clearExisting=arguments[1]||!1;if(elm.attr("href"))return existingData=parse(elm.attr("href")),0===arguments.length?existingData:(clearExisting?existingData=newData:$.extend(existingData,newData),elm.attr("href",elm.attr("href").split("?")[0]+"?"+serialize(existingData)),elm)}}(jQuery);